<?php

// =============================
// Eventos
// =============================

$eventos[0]['nome'] = "ARTISTA DA GUERRA";
$eventos[0]['raridade'] = "5,6,7";
$eventos[0]['equipamento'] = "8,9,10";
$eventos[0]['nivel'] = "85";
$eventos[0]['recompensa'] = "GRANDE ALMIRANTE THRAWN";
$eventos[0]['imagem'] = "/chars/tex.events_thrawn.jpg";
$eventos[0]['status'] = "GRANDADMIRALTHRAWN";
$eventos[0]['time'] = "ESQUADRÃO FÊNIX";
$eventos[0]['chars'][0]['nome'] = "HERASYNDULLAS3";
$eventos[0]['chars'][1]['nome'] = "EZRABRIDGERS3";
$eventos[0]['chars'][2]['nome'] = "SABINEWRENS3";
$eventos[0]['chars'][3]['nome'] = "ZEBS3";
$eventos[0]['chars'][4]['nome'] = "KANANJARRUSS3";
$eventos[0]['chars'][5]['nome'] = "CHOPPERS3";



$eventos[1]['nome'] = "TREINAMENTO DO GRANDE MESTRE";
$eventos[1]['raridade'] = "7";
$eventos[1]['equipamento'] = "8,9";
$eventos[1]['nivel'] = "80";
$eventos[1]['recompensa'] = "YODA";
$eventos[1]['imagem'] = "/chars/tex.events_yoda.jpg";
$eventos[1]['status'] = "GRANDMASTERYODA";
$eventos[1]['time'] = "JEDI";
$eventos[1]['chars'][0]['nome'] = "AAYLASECURA";
$eventos[1]['chars'][1]['nome'] = "AHSOKATANO";
$eventos[1]['chars'][2]['nome'] = "BARRISSOFFEE";
$eventos[1]['chars'][3]['nome'] = "EETHKOTH";
$eventos[1]['chars'][4]['nome'] = "EZRABRIDGERS3";
$eventos[1]['chars'][5]['nome'] = "GENERALKENOBI";
$eventos[1]['chars'][6]['nome'] = "HERMITYODA";
$eventos[1]['chars'][7]['nome'] = "IMAGUNDI";
$eventos[1]['chars'][8]['nome'] = "JEDIKNIGHTCONSULAR";
$eventos[1]['chars'][9]['nome'] = "ANAKINKNIGHT";
$eventos[1]['chars'][10]['nome'] = "JEDIKNIGHTGUARDIAN";
$eventos[1]['chars'][11]['nome'] = "KANANJARRUSS3";
$eventos[1]['chars'][12]['nome'] = "KITFISTO";
$eventos[1]['chars'][13]['nome'] = "LUMINARAUNDULI";
$eventos[1]['chars'][14]['nome'] = "MACEWINDU";
$eventos[1]['chars'][15]['nome'] = "OLDBENKENOBI";
$eventos[1]['chars'][16]['nome'] = "PLOKOON";
$eventos[1]['chars'][17]['nome'] = "QUIGONJINN";

$eventos[2]['nome'] = "PEÇAS E PLANOS";
$eventos[2]['raridade'] = "7";
$eventos[2]['equipamento'] = "7,8,9";
$eventos[2]['nivel'] = "85";
$eventos[2]['recompensa'] = "BB-8";
$eventos[2]['imagem'] = "/chars/tex.events_bb8_tfa.jpg";
$eventos[2]['status'] = "BB8";
$eventos[2]['time'] = "PRIMEIRA ORDEM";
$eventos[2]['chars'][0]['nome'] = "PHASMA";
$eventos[2]['chars'][1]['nome'] = "FIRSTORDEROFFICERMALE";
$eventos[2]['chars'][2]['nome'] = "FIRSTORDERTROOPER";
$eventos[2]['chars'][3]['nome'] = "FIRSTORDERTIEPILOT";
$eventos[2]['chars'][4]['nome'] = "KYLOREN";
$eventos[2]['chars'][5]['nome'] = "FIRSTORDEREXECUTIONER";
$eventos[2]['chars'][6]['nome'] = "KYLORENUNMASKED";
$eventos[2]['chars'][7]['nome'] = "FIRSTORDERSPECIALFORCESPILOT";

$eventos[3]['nome'] = "DROID IRRITANTE";
$eventos[3]['raridade'] = "7";
$eventos[3]['equipamento'] = "8,9";
$eventos[3]['nivel'] = "80";
$eventos[3]['recompensa'] = "R2-D2";
$eventos[3]['imagem'] = "/chars/tex.events_r2d2.jpg";
$eventos[3]['status'] = "R2D2_LEGENDARY";
$eventos[3]['time'] = "IMPÉRIO";
$eventos[3]['chars'][0]['nome'] = "VADER";
$eventos[3]['chars'][1]['nome'] = "DEATHTROOPER";
$eventos[3]['chars'][2]['nome'] = "DIRECTORKRENNIC";
$eventos[3]['chars'][3]['nome'] = "EMPERORPALPATINE";
$eventos[3]['chars'][4]['nome'] = "GARSAXON";
$eventos[3]['chars'][5]['nome'] = "VEERS";
$eventos[3]['chars'][6]['nome'] = "GRANDADMIRALTHRAWN";
$eventos[3]['chars'][7]['nome'] = "GRANDMOFFTARKIN";
$eventos[3]['chars'][8]['nome'] = "IMPERIALSUPERCOMMANDO";
$eventos[3]['chars'][9]['nome'] = "MAGMATROOPER";
$eventos[3]['chars'][10]['nome'] = "ROYALGUARD";
$eventos[3]['chars'][11]['nome'] = "SHORETROOPER";
$eventos[3]['chars'][12]['nome'] = "SNOWTROOPER";
$eventos[3]['chars'][13]['nome'] = "STORMTROOPER";
$eventos[3]['chars'][14]['nome'] = "TIEFIGHTERPILOT";

$eventos[4]['nome'] = "JORNADA DO HERÓI DE LUKE SKYWALKER";
$eventos[4]['raridade'] = "7";
$eventos[4]['equipamento'] = "8,9";
$eventos[4]['nivel'] = "85";
$eventos[4]['recompensa'] = "COMANDANTE LUKE SKYWALKER";
$eventos[4]['imagem'] = "/chars/tex.events_heros_journey_luke.jpg";
$eventos[4]['status'] = "COMMANDERLUKESKYWALKER";
$eventos[4]['time'] = "REBELDES";
$eventos[4]['chars'][0]['nome'] = "LUKESKYWALKER";
$eventos[4]['chars'][1]['nome'] = "PRINCESSLEIA";
$eventos[4]['chars'][2]['nome'] = "R2D2_LEGENDARY";
$eventos[4]['chars'][3]['nome'] = "STORMTROOPERHAN";
$eventos[4]['chars'][4]['nome'] = "OLDBENKENOBI";

$eventos[5]['nome'] = "JORNADA DO HERÓI DA REY";
$eventos[5]['raridade'] = "7";
$eventos[5]['equipamento'] = "8,9";
$eventos[5]['nivel'] = "85";
$eventos[5]['recompensa'] = "REY (TREINAMENTO JEDI)";
$eventos[5]['imagem'] = "/chars/tex.events_heros_journey_rey.jpg";
$eventos[5]['status'] = "REYJEDITRAINING";
$eventos[5]['time'] = "REBELDES";
$eventos[5]['chars'][0]['nome'] = "REY";
$eventos[5]['chars'][1]['nome'] = "FINN";
$eventos[5]['chars'][2]['nome'] = "BB8";
$eventos[5]['chars'][3]['nome'] = "SMUGGLERHAN";
$eventos[5]['chars'][4]['nome'] = "SMUGGLERCHEWBACCA";

// =============================
// Lista de Membros
// =============================

$i = 0;
$readJogadores = $PDO->query("SELECT DISTINCT `player` FROM `units` ORDER BY `player` ");


$i = 0;
$readPlayer = $PDO->query("SELECT DISTINCT `player`, `url` FROM `units`  WHERE `player` = '".$_GET['jogador']."'");
foreach ($readPlayer as $player){
	$i++;
	$rank[$i]['player'] = $player['player'];

	$o = 0;

	$readUnit = $PDO->query("SELECT * FROM `units` WHERE `player` = '".str_replace("'", "\'", $player['player'])."' AND `url` = '".$player['url']."'");
	foreach ($readUnit as $unit){
		$o++;
		//$rank[$i][$unit['base_id']] = 5;
		$rank[$i][$unit['base_id']]['gear_level'] = $unit['gear_level'];
		$rank[$i][$unit['base_id']]['level'] = $unit['level'];
		$rank[$i][$unit['base_id']]['rarity'] = $unit['rarity'];
		$rank[$i][$unit['base_id']]['base_id'] = ($unit['gear_level']/12)+($unit['level']/85)+($unit['rarity']/7);
		$rank[$i][$unit['base_id']]['base_id'] = $rank[$i][$unit['base_id']]['base_id']*100/3;
		if ($unit['rarity'] < 7 ) $rank[$i][$unit['base_id']]['base_id'] = 0;
		//(($unit['gear_level']/12)+($unit['level']/85)+($unit['rarity']/12))100/3;
	}

	$rank[$player['url']] = $rank[$i];
}

// =============================
// Dados dos Chars para Exibição
// =============================
$i = 0;
$readBase = $PDO->query("SELECT DISTINCT `characters`.`name`, `characters`.`base_id`, `characters`.`image` FROM `units` INNER JOIN `characters` ON `units`.`base_id` = `characters`.`base_id` ORDER BY `characters`.`name`");
foreach ($readBase as $base_id){
	$char[$base_id['base_id']]['name'] 	= $base_id['name'];
	$char[$base_id['base_id']]['image'] = $base_id['image'];

	$chars[$i]['name'] 			= $base_id['name'];
	$chars[$i]['base_id'] 		= $base_id['base_id'];
	$chars[$i]['image'] 		= $base_id['image'];
	++$i;
}

// =============================
// BackGround condicional
// =============================

function bg($requisito,$valor)
{
    $valores = explode(",",$requisito);
    if (count($valores)== 3)
    {
        if ($valor >= $valores[2])
        {
            return '#009900';
        } else if($valor >= $valores[0])
        {
            return '#FFB90F';
        } else
        {
            return '#FF0000';
        }
    }
    else if (count($valores)== 2)
    {
        if ($valor >= $valores[1])
        {
            return '#009900';
        } else if($valor >= $valores[0])
        {
            return '#FFB90F';
        } else
        {
            return '#FF0000';
        }
    }
     else if(count($valores)== 1)
    {
        if($valor >= $valores[0])
        {
            return '#009900';
        } else 
        {
            return '#FF0000';
        }
    }else
    {
        return '#FF0000';
    }
}

?>
